<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:b="http://bootsfaces.net/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">

<ui:composition template="template.xhtml">
	<ui:define name="titulo">
            Solicitud
        </ui:define>
	<ui:define name="contenido">
		<br />
		<h:form id="frm">
			<p:growl id="messages" showDetail="true" />
			<b:panel title="Crear Nueva Solicitud" look="primary">
				<b:row>
					<b:column span="2">
						<h:outputLabel value="Estado: "
							rendered="#{solicituduBean.edicion}" />
					</b:column>
					<b:column span="4">
						<h:outputLabel value="#{solicituduBean.sol_estado}"
							style="color: #317eac;" rendered="#{solicituduBean.edicion}">
						</h:outputLabel>
					</b:column>
				</b:row>
				<b:row>
					<b:column span="2">
						<h:outputLabel value="Solicitante:  " />
						<h:outputLabel value="Jefe Imediato:  " />
					</b:column>
					<b:column span="2">
						<h:outputLabel value="Lukcho correa " />
						<h:outputLabel value="José Manuel Vega" />
					</b:column>
					<b:column span="1"></b:column>
					<b:column span="2">
						<h:outputLabel value="Pasajeros:* " />
					</b:column>
					<b:column span="3">
						<b:inputText value="#{solicituduBean.sol_pasajeros}"
							disabled="#{solicituduBean.edicion}" required="true"
							requiredMessage="Campo pasajeros requerido" maxlength="10"
							validatorMessage="Campo pasajeros debe ingresar solo números.">
							<f:validateRegex pattern="[0-9]+" />
						</b:inputText>
					</b:column>
				</b:row>
				<b:row>
					<b:column span="2">
						<h:outputLabel value="Fecha de petición:* " />
					</b:column>
					<b:column span="3">
						<p:calendar required="true" mindate="#{solicituduBean.date}"
							disabled="#{solicituduBean.edicion}" label="Hora Fin"
							requiredMessage="Requerido Fecha" id="fechai" mode="popup"
							value="#{solicituduBean.fecha}" pattern="yyyy/MM/dd" mask="true">
							<p:ajax event="dateSelect" update="frm messages"></p:ajax>
						</p:calendar>
					</b:column>
					<b:column span="2">
						<h:outputLabel value="Motivo:* " />
					</b:column>
					<b:column span="3">
						<b:inputTextarea value="#{solicituduBean.sol_motivo}"
							disabled="#{solicituduBean.edicion}" required="true"
							requiredMessage="Campo motivo requerido" maxlength="255"
							validatorMessage="Campo motvo no debe contener espacios ni caracteres especiales.">
							<f:validateRegex pattern="[a-zA-Z0-9 ñíóúéáÑÁÉÍÓÚ]+" />
						</b:inputTextarea>
					</b:column>
				</b:row>
				<b:row>
					<b:column span="5">
						<b:thumbnail tooltip="Origen">
							<f:facet name="caption">
								<h:outputLabel value="Lugar Origen:* " />
								<h:panelGroup>
									<h:selectOneMenu id="trackseleccionar2" required="true"
										disabled="#{solicituduBean.edicion}" styleClass="form-control"
										requiredMessage="Requerido Origen"
										value="#{solicituduBean.sol_id_origen}">
										<f:selectItem itemLabel="Selección Origen" itemValue="" />
										<f:selectItems value="#{solicituduBean.listaOrigen}" />
										<f:ajax listener="#{solicituduBean.asignarLugarOrigen()}" />
									</h:selectOneMenu>
								</h:panelGroup>
								<br />
								<h:outputLabel value="Hora Inicio:* " />
								<p:calendar id="horaini" label="Hora inicio" title="Hora Inicio"
									disabled="#{solicituduBean.edicion}"
									value="#{solicituduBean.sol_hora_inicio}" pattern="HH:mm"
									minMinute="0" maxMinute="0" required="true"
									requiredMessage="Requerido Hora Inicio" timeOnly="true">
								</p:calendar>
							</f:facet>
						</b:thumbnail>
					</b:column>
					<b:column span="5">
						<b:thumbnail tooltip="Destino">
							<f:facet name="caption">
								<h:outputLabel value="Lugar Destino:* " />
								<h:panelGroup>
									<h:selectOneMenu id="trackseleccionar3" required="true"
										disabled="#{solicituduBean.edicion}" styleClass="form-control"
										requiredMessage="Requerido Destino"
										value="#{solicituduBean.sol_id_destino}">
										<f:selectItem itemLabel="Selección Destino" itemValue="" />
										<f:selectItems value="#{solicituduBean.listaDestino}" />
										<f:ajax listener="#{solicituduBean.asignarLugarDestino()}" />
									</h:selectOneMenu>
								</h:panelGroup>
								<br />
								<h:outputLabel value="Hora Destino:* " />
								<p:calendar id="horafin" value="#{solicituduBean.sol_hora_fin}"
									disabled="#{solicituduBean.edicion}" label="Escoger hora"
									pattern="HH:mm" required="true" title="Hora Inicio"
									minMinute="0" maxMinute="0"
									requiredMessage="Requerido Hora Inicio" timeOnly="true">
								</p:calendar>
							</f:facet>
						</b:thumbnail>
					</b:column>
				</b:row>
				<b:row>
					<b:column span="2">
						<b:selectBooleanCheckbox
							value="#{solicituduBean.sol_flexibilidad}"
							disabled="#{solicituduBean.edicion}"
							caption="Flexibilidad de cambio de hora" />
					</b:column>
					<b:column span="3">
						<h:outputLabel value="Funcionario Conductor: " />
						<h:panelGroup>
							<h:selectOneMenu id="trackseleccionar7" required="true"
								requiredMessage="Requerido Funcionario"
								disabled="#{solicituduBean.edicion}" styleClass="form-control"
								value="#{solicituduBean.sol_fcoid}">
								<f:selectItem itemLabel="Selección" itemValue="" />
								<f:selectItems
									value="#{solicituduBean.listaConductorfuncionario}" />
								<f:ajax
									listener="#{solicituduBean.asignarConductorFuncionario()}" />
							</h:selectOneMenu>
						</h:panelGroup>
					</b:column>
				</b:row>
				<b:row>
					<b:column span="2">
						<h:outputLabel value="Vehículo Asignado: "
							rendered="#{solicituduBean.edicion}" />
					</b:column>
					<b:column span="4">
						<h:outputLabel value="#{solicituduBean.sol_vehi}"
							style="color: #317eac;" rendered="#{solicituduBean.edicion}">
						</h:outputLabel>
					</b:column>
				</b:row>
				<b:row>	
					<b:column span="2">
						<h:outputLabel value="Conductor Asignado: "
							rendered="#{solicituduBean.edicion}" />
					</b:column>
					<b:column span="4">
						<h:outputLabel value="#{solicituduBean.sol_conductornombre}"
							style="color: #317eac;" rendered="#{solicituduBean.edicion}">
						</h:outputLabel>
					</b:column>
				</b:row>
				<br />
				<b:row>
					<b:column span="5">
						<p:commandButton value="Guardar" styleClass="btn btn-info"
							disabled="#{solicituduBean.edicion}"
							renrendered="#{solicituduBean.guardaredicion}"
							style="padding:7px;" onclick="PF('gu').show();"
							update="frm messages">
						</p:commandButton>&nbsp;&nbsp;&nbsp;
						<b:commandButton value="Volver"
							action="#{solicituduBean.volverSolicitud()}" update="frm"
							look="info" process="@this">
						</b:commandButton>
					</b:column>
				</b:row>
				<br />
				<br />
			</b:panel>
		</h:form>
		<p:confirmDialog header="Confirmación"
			message="Está seguro de guardar la información?" closable="false"
			showEffect="fade" hideEffect="explode" widgetVar="gu">
			<h:form>
				<p:commandButton value="Si" styleClass="ui-confirmdialog-yes"
					icon="ui-icon-check" action="#{solicituduBean.crearSolicitud()}"
					oncomplete="PF('gu').hide();" update="frm" />
				<p:commandButton value="No" type="button"
					styleClass="ui-confirmdialog-no" icon="ui-icon-close"
					onclick="PF('gu').hide();" />
			</h:form>
		</p:confirmDialog>
	</ui:define>
</ui:composition>
</html>