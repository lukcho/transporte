<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:b="http://bootsfaces.net/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">

<ui:composition template="template.xhtml">
	<ui:define name="titulo">
            Solicitud
        </ui:define>
	<ui:define name="contenido">
		<br />
		<h:form id="frm">
			<p:growl id="messages" showDetail="true" />
			<b:panel title="Crear Nueva Solicitud" look="primary">
				<b:row>
					<b:column span="2">
						<h:outputLabel value="Solicitante:  " />
						<h:outputLabel value="Jefe Imediato:  " />
					</b:column>
					<b:column span="2">
						<h:outputLabel value="Lukcho correa " />
						<h:outputLabel value="José Manuel Vega" />
					</b:column>
					<b:column span="2">
						<h:outputLabel value="Pasajeros:* " />
					</b:column>
					<b:column span="4">
						<b:inputText value="#{solicitudBean.sol_pasajeros}"
							required="true" requiredMessage="Campo pasajeros requerido"
							maxlength="10"
							validatorMessage="Campo pasajeros debe ingresar solo números.">
							<f:validateRegex pattern="[0-9]+" />
						</b:inputText>
					</b:column>
				</b:row>
				<b:row>
					<b:column span="2">
						<h:outputLabel value="Fecha de petición:* " />
					</b:column>
					<b:column span="2">
						<p:calendar required="true" mindate="#{solicitudBean.date}"
							requiredMessage="Requerido Fecha" id="fechai" mode="popup"
							value="#{solicitudBean.fecha}" pattern="yyyy/MM/dd" mask="true">
							<p:ajax event="dateSelect" update="frm messages"></p:ajax>
						</p:calendar>
					</b:column>
					<b:column span="2">
						<h:outputLabel value="Motivo:* " />
					</b:column>
					<b:column span="4">
						<b:inputTextarea value="#{solicitudBean.sol_motivo}"
							required="true" requiredMessage="Campo motivo requerido"
							maxlength="255"
							validatorMessage="Campo motvo no debe contener espacios ni caracteres especiales.">
							<f:validateRegex pattern="[a-zA-Z0-9 ñíóúéáÑÁÉÍÓÚ]+" />
						</b:inputTextarea>
					</b:column>
				</b:row>
				<b:row>
					<b:column span="5">
						<b:thumbnail tooltip="Origen">
							<f:facet name="caption">
								<h:outputLabel value="Lugar Origen:* " />
								<h:panelGroup>
									<h:selectOneMenu id="trackseleccionar2" required="true"
										styleClass="form-control"
										value="#{solicitudBean.sol_id_origen}">
										<f:selectItems value="#{solicitudBean.listaOrigen}" />
										<f:ajax listener="#{solicitudBean.asignarLugarOrigen()}" />
									</h:selectOneMenu>
								</h:panelGroup>
								<br />
								<h:outputLabel value="Hora Inicio:* " />
								<p:calendar id="horaini" minMinute="0" maxMinute="0"
									value="#{solicitudBean.sol_hora_inicio}" pattern="HH:mm"
									required="true" requiredMessage="Requerido Hora Inicio"
									timeOnly="true">
								</p:calendar>
							</f:facet>
						</b:thumbnail>
					</b:column>
					<b:column span="5">
						<b:thumbnail tooltip="Destino">
							<f:facet name="caption">
								<h:outputLabel value="Lugar Destino:* " />
								<h:panelGroup>
									<h:selectOneMenu id="trackseleccionar3" required="true"
										styleClass="form-control"
										value="#{solicitudBean.sol_id_destino}">
										<f:selectItems value="#{solicitudBean.listaDestino}" />
										<f:ajax listener="#{solicitudBean.asignarLugarDestino()}" />
									</h:selectOneMenu>
								</h:panelGroup>
								<br />
								<h:outputLabel value="Hora Destino:* " />
								<p:calendar id="horafin" value="#{solicitudBean.sol_hora_fin}"
									pattern="HH:mm" required="true" minMinute="0" maxMinute="0"
									requiredMessage="Requerido Hora Inicio" timeOnly="true">
								</p:calendar>
							</f:facet>
						</b:thumbnail>
					</b:column>
				</b:row>
				<b:row>
					<b:column span="4">
						<b:selectBooleanCheckbox value="#{solicitudBean.sol_flexibilidad}"
							caption="Flexibilidad de cambio de hora" />
					</b:column>
				</b:row>
				<b:row>
					<b:column span="4" >
						<b:thumbnail tooltip="Asignar Vehículo" >
							<f:facet name="caption">
								<h:outputLabel value="Vehículo:* " />
								<h:panelGroup>
									<h:selectOneMenu id="trackseleccionar5" required="true"
										styleClass="form-control" value="#{solicitudBean.sol_vehi}">
										<f:selectItems value="#{solicitudBean.listaVehiculo}" />
										<f:ajax listener="#{solicitudBean.asignarVehiculo()}" />
									</h:selectOneMenu>
								</h:panelGroup>
								<h:outputLabel value="Conductor:* " />
								<h:panelGroup>
									<h:selectOneMenu id="trackseleccionar6" required="true"
										styleClass="form-control"
										value="#{solicitudBean.sol_conductor}">
										<f:selectItems value="#{solicitudBean.listaConductor}" />
										<f:ajax listener="#{solicitudBean.asignarConductor()}" />
									</h:selectOneMenu>
								</h:panelGroup>
								<br />
								<h:outputLabel value="Funcionario Conductor:* " />
								<h:panelGroup>
									<h:selectOneMenu id="trackseleccionar7" required="true"
										styleClass="form-control"
										value="#{solicitudBean.sol_fcoid}">
										<f:selectItems value="#{solicitudBean.listaConductorfuncionario}" />
										<f:ajax listener="#{solicitudBean.asignarConductorFuncionario()}" />
									</h:selectOneMenu>
								</h:panelGroup>
							</f:facet>
						</b:thumbnail>
					</b:column>
				</b:row>
				<br />
				<b:row>
					<b:column span="2">
						<h:outputLabel value="Estado*" rendered="#{solicitudBean.edicion}" />
					</b:column>
					<b:column span="4">
						<b:selectOneMenu value="#{solicitudBean.sol_estado}"
							rendered="#{solicitudBean.edicion}">
							<f:selectItems value="#{solicitudBean.listEstados}" />
						</b:selectOneMenu>
					</b:column>
				</b:row>
				<b:row>
					<b:column span="5">
						<p:commandButton value="Guardar" styleClass="btn btn-info"
							renrendered="#{solicitudBean.guardaredicion}"
							style="padding:7px;" onclick="PF('gu').show();"
							update="frm messages">
						</p:commandButton>&nbsp;&nbsp;&nbsp;
						<b:commandButton value="Volver"
							action="#{solicitudBean.volverSolicitud()}" update="frm"
							look="info" process="@this">
						</b:commandButton>
					</b:column>
				</b:row>
				<br />
				<br />
			</b:panel>
		</h:form>
		<p:confirmDialog header="Confirmación"
			message="Está seguro de guardar la información?" closable="false"
			showEffect="fade" hideEffect="explode" widgetVar="gu">
			<h:form>
				<p:commandButton value="Si" styleClass="ui-confirmdialog-yes"
					icon="ui-icon-check" action="#{solicitudBean.crearSolicitud()}"
					oncomplete="PF('gu').hide();" update="frm" />
				<p:commandButton value="No" type="button"
					styleClass="ui-confirmdialog-no" icon="ui-icon-close"
					onclick="PF('gu').hide();" />
			</h:form>
		</p:confirmDialog>
	</ui:define>
</ui:composition>
</html>